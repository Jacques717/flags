# Speech Recognition Setup Guide

## Current Implementation

The game includes a `SpeechRecognitionHandler` component that provides:

1. **Editor Testing Mode**: Keyboard input fallback (type country name + Enter)
2. **Android Support**: Native Android SpeechRecognizer integration
3. **iOS Support**: Placeholder for iOS Speech Framework (requires native plugin)

## For Production: UnitySpeechToText Plugin

For full cross-platform speech recognition, integrate the UnitySpeechToText plugin:

### Installation

1. **Download Plugin**
   - GitHub: https://github.com/yasirkula/UnitySpeechToText
   - Download the latest release or clone the repository

2. **Import to Unity**
   - Extract the plugin
   - Copy the `Plugins` folder to `Assets/Plugins/UnitySpeechToText/`
   - Unity will automatically import the plugin

3. **Platform Setup**

   **Android:**
   - The plugin includes Android native code
   - No additional setup needed
   - Ensure microphone permission is requested (handled by plugin)

   **iOS:**
   - Requires Xcode project setup
   - Add microphone usage description to Info.plist:
     ```xml
     <key>NSMicrophoneUsageDescription</key>
     <string>We need microphone access to recognize your voice answers</string>
     ```
   - Add speech recognition usage description:
     ```xml
     <key>NSSpeechRecognitionUsageDescription</key>
     <string>We need speech recognition to check your answers</string>
     ```

### Integration with Current Code

The `SpeechRecognitionHandler.cs` is designed to work with the plugin. To integrate:

1. **Update SpeechRecognitionHandler.cs**

   Replace the Android/iOS implementation sections with plugin calls:

   ```csharp
   #if UNITY_ANDROID && !UNITY_EDITOR
   using SpeechToText;
   
   private void InitializeAndroidSpeechRecognition()
   {
       // Use UnitySpeechToText plugin
       SpeechToTextManager.Instance.Initialize();
       isInitialized = true;
   }
   
   private void StartAndroidListening()
   {
       SpeechToTextManager.Instance.StartRecording((result) => {
           OnSpeechRecognized?.Invoke(result);
           isRecording = false;
       });
   }
   #endif
   ```

2. **Update iOS Implementation**

   Similar pattern for iOS using the plugin's iOS wrapper.

### Alternative: Platform-Native Implementation

If you prefer not to use the plugin, you can implement platform-native solutions:

**Android:**
- Use Android Java plugin to call `android.speech.SpeechRecognizer`
- Current code structure supports this approach

**iOS:**
- Use Objective-C/Swift plugin to call `SFSpeechRecognizer`
- Requires native code bridge

## Testing

### Editor Testing
- Current implementation uses keyboard input in Editor
- Type country name and press Enter
- Full game flow can be tested without device

### Device Testing
1. Build and deploy to device
2. Grant microphone permissions when prompted
3. Test speech recognition accuracy
4. Adjust answer matching sensitivity if needed

## Permissions

### Android
Add to `AndroidManifest.xml` (usually auto-generated by Unity):
```xml
<uses-permission android:name="android.permission.RECORD_AUDIO" />
```

### iOS
Add to `Info.plist` (via Unity Player Settings):
- Microphone Usage Description
- Speech Recognition Usage Description

## Troubleshooting

**Speech not recognized:**
- Check microphone permissions are granted
- Verify device has internet connection (for cloud-based recognition)
- Test with simple words first
- Check device microphone is working

**Plugin not working:**
- Verify plugin is properly imported
- Check platform-specific code is included in build
- Review plugin documentation for setup requirements

**Editor testing issues:**
- Ensure keyboard input mode is enabled
- Check console for input messages
- Verify game is in focus when typing

## Current Status

✅ Editor keyboard input - Working
✅ Android structure - Ready for plugin integration
⚠️ iOS structure - Placeholder, needs plugin integration
✅ Answer matching - Working with fuzzy matching
✅ Game flow - Complete

## Next Steps

1. Download and integrate UnitySpeechToText plugin
2. Update SpeechRecognitionHandler with plugin calls
3. Test on Android device
4. Test on iOS device
5. Fine-tune answer matching sensitivity
6. Add error handling and retry logic

